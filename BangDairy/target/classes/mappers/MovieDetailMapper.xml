<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MovieDetailDAO">
 <select id="selectMovie" parameterType="movie" resultType="movie">
 	SELECT * FROM movie_info 
 	WHERE movie_id = #{movieId}
 </select>
 <select id="selectGenre" parameterType="movie" resultType="genre">
 	SELECT b.genre_id as genre_id , b.genre_title as genre_title
 	FROM (SELECT genre_id FROM movie_genre WHERE movie_id = #{movieId}  )  a 
 	INNER JOIN genre_info  b
 	ON a.genre_id = b.genre_id
 	ORDER BY genre_id;
 </select>
 
 <select id="selectStarring" parameterType="movie" resultType="hashmap">
 	SELECT b.actor_id as actor_id , b.actor_name as actor_name,a.role as role
 	FROM (SELECT actor_id, role FROM starring WHERE movie_id = #{movieId}) a 
 	 inner join actor_info b
 	ON a.actor_id = b.actor_id
 	ORDER BY actor_id
 </select>
 <select id="selectDirectors" parameterType="movie" resultType="director">
 	SELECT b.director_id as director_id , b.director_name as director_name
 	FROM (SELECT director_id FROM movie_director WHERE movie_id = #{movieId}) a 
 	 inner join director_info b
 	ON a.director_id = b.director_id
 	ORDER BY director_id
 </select>
</mapper>  