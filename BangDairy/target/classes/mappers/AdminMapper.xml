<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminDAO">
<select id="getMovie" parameterType="hashmap" resultType="hashmap">
	SELECT m.*,group_concat(g.genre_title) as genre FROM movie_info m inner join movie_genre mg
	ON mg.movie_id = m.movie_id inner join genre_info g
	ON mg.genre_id = g.genre_id 
	group by m.movie_id  
	<if test="searchWord !=null">
	HAVING replace(movie_title,' ','') like "${searchWord}%"
	</if>
	order by m.opening_date desc
	LIMIT ${page}
</select>
<select id="getUser" parameterType="hashmap" resultType="account">
	SELECT * FROM user_info
	<if test="searchWord!=null">
	WHERE replace(user_id,' ','') like "${searchWord}%"
	</if>
	order by join_date desc
	LIMIT ${page}
</select>
<select id="getDiary" parameterType="hashmap" resultType="diary">
	SELECT * FROM diary_info
	<if test="searchWord != null">
	WHERE replace(user_id,' ','') like "${searchWord}%"
	</if>
	ORDER BY reg_date desc
	LIMIT ${page}
</select>
	
	
</mapper>