<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AccountFormDAO">

	<!-- db에 유저 id 존재 여부 질의 쿼리 -->
	<select id="selectIdCheck" resultType="String" parameterType="String">
		select * from user_info where user_id = #{id}
	</select>
	
	<select id="selectEmailCheck" resultType="String" parameterType="String">
		select * from user_info where user_email = #{email};
	</select>
	
	
	<!-- db에 유저 정보 저장 쿼리-->
	<insert id="insertUser" parameterType="account">
		insert into user_info(user_id,user_password,
			user_email,user_reg
		<if test="userProfile != null">
			,user_profile
		</if>
		<if test="userProfileSize != null">
			,user_profile_size
		</if>
			)
		 values(#{userId},#{userPassword},
		#{userEmail},#{userReg}
		<if test="userProfile != null">
		,#{userProfile}
		</if>
		<if test="userProfileSize != null">
		,#{userProfileSize}
		</if>
		)
	</insert>
	<!-- 유저가 로그인 하려 할때 해당 정보가 db에 존재하는지 질의하는 쿼리 -->
	<select id="SignInUser" resultType="Int" parameterType="account">
		select count(*) from user_info where user_id = #{userId} and user_password = #{userPassword}
	</select>
	<select id="checkForKakao" parameterType="account" resultType="account">
		SELECT * FROM user_info WHERE user_email=#{userEmail} AND user_id=#{userId}
	</select>
	<insert id="joinKakao">
		INSERT INTO user_info (user_id,user_email,absolute_file_path)
		VALUES (#{userId},#{userEmail},#{#absoluteFilePath})
	</insert>
</mapper>